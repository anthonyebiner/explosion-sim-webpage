<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>CUDA-Accelerated Explosion Animation</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-translucentGray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="28b5de26-1e0f-4fbd-93b9-4408c67ab3b3" class="page sans"><header><img class="page-cover-image" src="images/nv%201.gif" style="object-position:center 51.760000000000005%"/><h1 class="page-title"><strong>CUDA-Accelerated Explosion Animation</strong></h1></header><div class="page-body"><h1 id="821f6fbd-afd2-43eb-8e6e-7ac5d764750e" class="">CS184 Final Project</h1><p id="38bad56b-5eb7-450f-a3c2-6b80c793981b" class="">Anthony Ebiner, Shruteek Mairal, Srisai Nachuri, Maddy Chen</p><h2 id="f7cd276b-f4de-438d-8d71-f5f222030e89" class=""><strong>Abstract</strong></h2><p id="61823128-551b-45fa-9a60-4a28cef4557c" class="">A very common rendering task in animation is an accurate rendering of explosions in a wide variety of applications such as cinematography, video games, and physics simulations. For our final project, we built a GPU accelerated explosion simulation, simulating hundreds of thousands of particles modeled after realistic physics. These animations were built upon 3 modules: a Physical System, Visualizer, and Raytracer. The Physical System combined both particle and fluid physics by modeling the interactions between combusting fluid particles and corresponding temperature and velocity changes in a particle’s surrounding fluid cell. In turn, the fluid system would dictate the motion of fluid, drag force on particles, and energy transfer between different cells and particles. Utilizing the fluid system was intended to help the particles move in a non-uniform, physically accurate manner that more closely resembled abstract shapes of fire and explosions. After each timestep, the particles were passed into a Visualizer system, which converted particles into primitives, including taking into account particle radius and temperature to convert to RGB values for a bidirectional scattering distribution function. Lastly, these primitives were passed into the Raytracer module, which would render the frames that we stitched together to create the animations. The raytracer was run with a GPU and was heavily optimized through CUDA-acceleration, function optimization, and compatibility integration with various file types in order to support rendering massive numbers of primitives quickly.</p><p id="3bfeafa0-1133-4bd4-9faa-cea4b67385ab" class="">
</p><p id="2ac58561-63a1-487c-bb18-1f00d456e992" class="">Please see an overview of this project in our <a href="https://drive.google.com/file/d/1roYMMJdVs5HJHvaCVD75nyJDBDURkNEZ/view?usp=share_link">final project video</a>.</p><p id="e8ea206a-051b-4fca-b222-5a2ba4cb2bb2" class="">
</p><h2 id="c70fe353-2f89-4398-a61d-5cb18a89937f" class=""><strong>Technical approach</strong></h2><p id="1cf4f04e-dad5-47d4-8230-e71e96a38a21" class="">Our animations relied on 3 modules to produce our final output: Raytracer, Physics, and Visualizer systems.</p><h3 id="5aaaeb64-da62-400d-8cd9-b18207826250" class=""><strong><strong>Module 1: CUDA-Accelerated GPU Raytracer</strong></strong></h3><p id="54ffecd4-704a-495c-b0be-a9a825419d9e" class="">In order to render hundreds of thousands of particles, our raytracer needed to be heavily optimized so that frames could render in a reasonable time period. Building off of project 3, the code was heavily modified in order to support running the raytracer on a GPU via CUDA.</p><p id="7aaebd7a-b551-428f-99f8-b91b3eb79857" class="">Several optimizations enabled lighting-fast rendering. These included writing a spatially contiguous BVH implementation (with BVH nodes using only 32 bytes of code), using floats instead of doubles, speeding up intersection tests, writing a fast XORShift random implementation, and using iterative ray bouncing instead of recursive ray bouncing. Converting the code to utilize the GPU’s CUDA cores was a significant undertaking, and required refactoring nearly all of the codebase. Additionally, since not all team members had access to the GPU, the raytracer was modified to be able to detect if the computer was a CUDA capable device, and to fall back to CPU rendering if it was not. This enabled all team members to test the rendering of the physics and visualizer systems regardless. The raytracer was also written as a header-only library, which allowed it to be easily imported into the other modules using the FetchContent dependency manager. To generate a larger library of images, the raytracer was also modified to be able to parse and load .OBJ and .MTL files, for more options of triangle meshes and materials. Overall, our accelerated implementation ended up being between 20 and 60 times faster than the previous version, which proved to be vital for rendering the explosions to come.</p><div id="f6e1474f-25b5-4b7d-b819-1c9d54e614f7" class="column-list"><div id="cc02e639-65e9-4756-9ce9-99a1791baaa7" style="width:15.625%" class="column"><p id="1e26bff5-2fa4-4c46-b3b7-5252aa49637c" class="">
</p></div><div id="b98f7303-cb7a-4e3c-bc1b-525fac383835" style="width:34.375%" class="column"><p id="e573ffd8-7605-45c5-9fe0-5328b167aa57" class="">
</p><figure id="a7ae009d-9d93-4ca9-ad7a-52ce5b40bc4e" class="image"><a href="images/Untitled.png"><img style="width:672px" src="images/Untitled.png"/></a><figcaption>BVH-Ray intersections are over 100x faster on the GPU</figcaption></figure><figure id="17e21f88-d335-472c-a984-6e4a54c659cf" class="image"><a href="images/Untitled%201.png"><img style="width:1134px" src="images/Untitled%201.png"/></a><figcaption>Library can be imported in just a couple lines!</figcaption></figure></div><div id="96dacedc-06f0-4761-9b73-e17851f1d9ba" style="width:37.5%" class="column"><p id="ead50fef-37e7-4b3f-bf62-42cc83a676a9" class="">
</p><figure id="fd8d1206-e30c-4e53-854d-888f156b1435" class="image"><a href="images/Untitled%202.png"><img style="width:528px" src="images/Untitled%202.png"/></a><figcaption>Added a pretty progress bar!</figcaption></figure></div><div id="eb3decb9-2ed8-4c55-9168-d599485acb92" style="width:12.5%" class="column"><p id="33a7efba-c7ee-4a13-a027-8617d894d1f3" class="">
</p></div></div><p id="2265949f-7588-4f2e-90ef-e90c7989d6bf" class="">
</p><p id="c98ce44b-e04a-4a4c-8f35-b61650e903c8" class=""><strong>Renderings from the CUDA-accelerated raytracing, yielding a ~4000% speedup!!:</strong></p><p id="7cf1879e-b98a-4123-b6e7-23f5201626c5" class="">1k pixel samples, 4 light samples, 7 depth:</p><div id="cc9332da-91e2-44b4-bbb2-036c9c6d93db" class="column-list"><div id="79e06b3e-eaaf-403b-8eff-fed2066a3836" style="width:49.99999999999999%" class="column"><p id="bbe30f0d-6acb-44f9-b014-ecc6fdeb7a6d" class="">Accelerated Implementation</p><figure id="0a3b071f-7a9d-45b7-8a83-097ec70a17b5" class="image"><a href="images/Untitled%203.png"><img style="width:600px" src="images/Untitled%203.png"/></a><figcaption>4.021s</figcaption></figure></div><div id="1a50b62a-11bc-4225-94cc-3ad24105428f" style="width:49.99999999999999%" class="column"><p id="e06a31ea-8338-4287-a2d3-29d23de1a3fd" class="">Project 3 Implementation</p><figure id="16c503a6-131a-44de-9749-adde26c4d36a" class="image"><a href="images/Untitled%204.png"><img style="width:600px" src="images/Untitled%204.png"/></a><figcaption>101.054s</figcaption></figure></div></div><p id="767d7055-9ca1-4eb7-84fc-57ed715311aa" class="">256 pixel samples, 4 light samples, 7 depth:</p><div id="3e615d7f-74a9-46c8-af41-500f43a0b464" class="column-list"><div id="3aae142c-5109-4a0d-9580-785020aaa218" style="width:50%" class="column"><figure id="7fd36adf-70ab-4204-b11d-6bb5505ea71b" class="image"><a href="images/Untitled%205.png"><img style="width:800px" src="images/Untitled%205.png"/></a><figcaption>1.386s</figcaption></figure></div><div id="c3c8e7a2-d212-42dd-b23a-58401c14cec0" style="width:50%" class="column"><figure id="bd34b520-1663-4005-859a-7f36426e1210" class="image"><a href="images/Untitled%206.png"><img style="width:800px" src="images/Untitled%206.png"/></a><figcaption>~2min</figcaption></figure></div></div><p id="9eb70a65-529d-419f-8666-d1ae541c5104" class="">
</p><h3 id="f724b371-8bed-4fb0-945c-53bc8be5a23c" class=""><strong>Module 2: Physics of Explosions</strong></h3><p id="0c3d2acd-a8b7-4d0c-927a-1412e84decc8" class="">The second module handled all of the physics for our animations. Our model was primarily based on <a href="http://graphics.berkeley.edu/papers/Feldman-ASP-2003-08/Feldman-ASP-2003-08.pdf">Animating Suspended Particle Explosions</a> by Feldman, O’Brien, &amp; Arikan, which uses a physical system for suspended particle explosions supported by an incompressible, inviscid fluid model to better account for the motions of particles. The fluid system also derived heavily from <a href="https://pages.cs.wisc.edu/~chaol/data/cs777/stam-stable_fluids.pdf">Jos Stam’s 1999 Stable Fluids</a> paper as well as <a href="https://web.stanford.edu/class/cs237d/smoke.pdf">Fedkiw et al.’s 2001 Visual Simulation of Smoke</a> paper, with Navier-Stokes-simplifying assumptions including incompressibility, inviscid flow, continuity equation deviation, and force assumptions including vorticity confinement, thermal buoyancy, and drag force. The particle system was based primarily on the Feldman et al. paper due to its novel usage of both particle and fluid systems to simulate explosions, which was our main goal. Its particles interacted with the fluid through combustion (which released heat, gas, and soot particles), drag force, and heat transfer, as well as a divergence deviation force that was added to approximate the more intractable segments of our Navier-Stokes solver. Both systems were built from the ground up without the usage of external programs or modules for solving equations or rendering the results, save our visualizer and raytracer.</p><p id="b0450fcf-dad3-41f7-b3e5-adf1bc84d3be" class="">We created the following new classes to create our systems: PhysicalSystem, which contained spatially-discretized fluid and continuous space particles; Fluid, which modeled overall fluid properties; Fuel, which modeled overall combustion and particle properties; FluidCell, which stored time-dependent fluid properties; and Particle, which stored time-dependent solid properties. In each timestep, the forces applied on individual particles and fluid cells were calculated using the equations from the paper along with various approximations based on our spatial and temporal discretization. Values tracked included fluid temperature, fluid velocity, particle temperature, particle velocity, particle position, soot generation, continuity deviation, and particle radius. Similarly to in the Feldman et al. paper, our values for properties such as drag coefficient and density were empirically chosen for visuals, not realism, as realistic values with appropriate units proved poor sources of interesting explosive renders.</p><p id="de06d796-335f-4511-bd49-8b2cad3afd76" class="">
</p><h3 id="41f4c225-fc29-413e-be57-e9d4e9e6c1ca" class=""><strong>Module 3: Visualizer</strong></h3><p id="3da73861-2a03-4efa-9189-e11ca5e2869e" class="">The visualizer module took the output from the physical system and converted it into primitives appropriate for the raytracer. At a high level, the visualizer manages the other two modules by initializing the raytracer with an appropriate camera angle, and important scene features such as lighting and coloring. The visualizer also initializes the physical system with a set number of particles at a start point with chosen starting properties. The visualizer then iterates over a specified number timesteps, and in each instance first rendering the particles with the raytracer and calls the update methods in the physical system to compute the new particle and fluid cell properties. After rendering sufficient images, the renderings from each timestep were parsed together via a Python script to generate an animation of the explosion.</p><p id="153cfd78-0ad6-4fa8-8247-6bb4b403f891" class="">For rendering the particles into the correct primitives, there were several design choices made. Firstly, all particles were rendered as spheres with a radius specified by the physical system based on the particle mass and then scaled appropriately based on the renderer viewing angles. We utilized bidirectional scattering distribution functions (BSDF) for the spheres, but these differed for different types of particles. Particles that are actively combusting such as fuel particles above their combusting temperature threshold were modeled with an emission BSDF, since combusting fuel in an explosion should produce its own light. On the other hand, cooler particles that were not actively in combustion and soot particles were modeled with a diffuse BSDF. In both cases, the wavelengths of light emitted/reflected were estimated off of a Blackbody Radiation curve according to the particle’s temperature for RGB inputs for the primitives.</p><div id="d58a29f4-ac21-4d14-ada3-e2fc62a3bd42" class="column-list"><div id="186a8cbe-361a-4472-b5e0-5d94a945098d" style="width:33.33333333333333%" class="column"><figure id="c2d029ce-9ae9-413b-a7b5-1779180411ed" class="image"><a href="images/Untitled%207.png"><img style="width:480px" src="images/Untitled%207.png"/></a><figcaption>Blackbody Radiation. Source: <em><a href="https://www.google.com/url?q=https://cdn.britannica.com/83/283-050-7701048B/energy-unit-area-second-wavelength-interval-temperatures.jpg&amp;sa=D&amp;source=docs&amp;ust=1683258500052210&amp;usg=AOvVaw2C_ZYfaorfwxZGF1ekUPym">brittanica.com</a></em></figcaption></figure><p id="1c61bc4f-318a-40e9-b193-29b8ca6dcb7c" class="">
</p></div><div id="7ef3facd-c01e-4419-a7fa-b8c7f26ef5f9" style="width:33.33333333333333%" class="column"><figure id="7a1343e5-1037-4f81-94b3-065b480a6b5d" class="image"><a href="images/Untitled%208.png"><img style="width:600px" src="images/Untitled%208.png"/></a><figcaption>emission bsdf (CUDA)</figcaption></figure><p id="cf05439e-d076-4c03-9d21-ea3242bec7c8" class="">
</p></div><div id="61e191c0-ffc4-4183-997a-b499d24640a0" style="width:33.33333333333333%" class="column"><figure id="4fed7910-3e2e-4a45-8b03-55642660e18d" class="image"><a href="images/Untitled%209.png"><img style="width:600px" src="images/Untitled%209.png"/></a><figcaption>emission bsdf (CPU)</figcaption></figure><p id="78e7a97b-a1d5-43a7-a8df-1304f1598310" class="">
</p></div></div><h3 id="d92f19f6-beb9-4048-a41a-e67ff61ba6c8" class=""><strong>Problems tackled and lessons learned</strong></h3><p id="db95ba6a-1615-4c5e-9512-c090fd613fd4" class="">During this process, it took a while to get the physics working, as it was a lengthy process. Since we broke down portions between multiple people, we had to communicate effectively to make sure we were all on the same page for the code. We had to decide on a baseline in order to generate an explosion, and then continue working to get the code working.</p><p id="90dc58e5-403e-4ac1-b6a6-a2f9b77b0a73" class="">We also learned a few lessons, including that Discretized Navier-Stokes is hard! Especially in C++... Another coding lesson is to keep track of your pointers! In terms of overall project lessons, having backups for ambitious goals and modularization is important!</p><p id="20ac7fff-7781-4c96-b614-7c28c379ce76" class="">
</p><h3 id="29ca84a3-4ded-4b29-9421-6b2be176c23f" class=""><strong>aaand BOOM! The Results! </strong>💥</h3><p id="cec7b8e5-84ee-462b-811f-d673f192316d" class=""><strong>Our CUDA-accelerated raytracer was able to render the following in decent time! </strong></p><p id="b8a80ec4-f3a7-44a2-94c9-e806b243a4ec" class=""><em>Models downloaded from Morgan McGuire&#x27;s Computer Graphics Archive https://casual-effects.com/data</em></p><div id="c694ccb9-222a-405a-9cee-6dd8b4c79a43" class="column-list"><div id="a74c83c6-339c-4c5e-8399-184034b6fc43" style="width:33.333333333333336%" class="column"><figure id="1d9af0c1-1646-48e0-8d92-c9bfed2bef06" class="image"><a href="images/Untitled%2010.png"><img style="width:1960px" src="images/Untitled%2010.png"/></a></figure><p id="574fe7c9-44d4-4814-b35b-3b10f2453b58" class="">
</p></div><div id="f8765315-4f58-40e5-bdd2-e885518b2339" style="width:33.333333333333336%" class="column"><figure id="148ea356-968e-4243-b002-608f4829ffad" class="image"><a href="images/Untitled%2011.png"><img style="width:1280px" src="images/Untitled%2011.png"/></a></figure></div><div id="35136485-dd43-49bd-a8e9-976d51224932" style="width:33.33333333333333%" class="column"><figure id="0474df6e-40dd-48a0-ad2d-05e5319ad6e2" class="image"><a href="images/Untitled%2012.png"><img style="width:800px" src="images/Untitled%2012.png"/></a><figcaption>72.13s, 800x600, 100 samples, 4 light samples, 40 depth, adaptive sampling. 2.88 million primitives!</figcaption></figure></div></div><div id="113b576d-6f61-462b-99c5-ff81d4231e92" class="column-list"><div id="578825f2-4bec-4c34-a380-246f9ce081c5" style="width:50%" class="column"><figure id="10c35896-28c7-4dae-bd35-579180e85f08" class="image"><a href="images/Untitled%2013.png"><img style="width:1920px" src="images/Untitled%2013.png"/></a><figcaption>~15 min, 1920x1080, 2k samples, 50 depth, no adaptive sampling</figcaption></figure></div><div id="b6dd2a2e-b994-472a-aa9b-b9d8214afd7a" style="width:50%" class="column"><figure id="4a8ce006-0bac-4395-a454-1014a77bbec6" class="image"><a href="images/Untitled%2014.png"><img style="width:1920px" src="images/Untitled%2014.png"/></a><figcaption>~10 min, 1920x1080, 1k samples, 5 depth, adaptive sampling</figcaption></figure></div></div><p id="338569c0-d9d9-4be7-811c-29148d3d052c" class="">
</p><p id="c0a8c759-f2fa-4b53-a92d-8199a40af26b" class=""><strong>Our explosions with the fluid simulation physics:</strong></p><p id="bc9281f3-4d4d-42b6-ab90-064b21843075" class="">Since Navier-Stokes is quite difficult and sometimes numerically unstable, not every rendering uses all the Navier-Stokes equations, but we managed to render some that do, which we noted! However, all of these use fluid simulation.</p><div id="cf5e4baa-14da-43aa-81c0-9d01bda5bd9b" class="column-list"><div id="90b863e7-7feb-47e3-b5fd-dad64d1cd8e1" style="width:50%" class="column"><figure id="f74f59fc-5c23-4343-8ad6-678f7c8887cf" class="image"><a href="images/nv7.gif"><img style="width:800px" src="images/nv7.gif"/></a><figcaption>uses full Navier-Stokes; blue vortex generated by N-S divergence equation</figcaption></figure></div><div id="e662d2da-fb7b-42c8-8f4e-d589264ee95c" style="width:50%" class="column"><figure id="a38a5e5c-b24a-4b76-b287-f9fd5b4fa2fc" class="image"><a href="images/nv9.gif"><img style="width:800px" src="images/nv9.gif"/></a></figure></div></div><p id="bbd51584-744f-4959-bb1a-5256e78e70f5" class="">
</p><p id="5104f0d3-2fc7-4348-a84a-2da00732d3fd" class="">Below are other cool renderings that use most of the NS equations, where we varied parameters such as deviation force, acceleration due to gravity, radiative heat loss, thermal conductivity, and ambient temperature. </p><div id="3a269a16-896b-4f0e-a47e-d82ea93c5149" class="column-list"><div id="6c8dc2f9-0258-4c04-a0d7-c24479706f90" style="width:50%" class="column"><figure id="35bd0e99-a12d-4458-9a18-00ad1c686d71" class="image"><a href="images/nv.gif"><img style="width:800px" src="images/nv.gif"/></a></figure></div><div id="ada674c3-9470-436f-943c-132fe1526bb5" style="width:50%" class="column"><figure id="699cb111-97bc-4c2d-b458-1358c86e5437" class="image"><a href="images/nv12.gif"><img style="width:800px" src="images/nv12.gif"/></a></figure></div></div><div id="c6c6986a-d88e-4a6f-9e60-4d7a88845e77" class="column-list"><div id="a022170c-3110-4117-986a-06629013b135" style="width:33.33333333333333%" class="column"><figure id="5c6febd4-9540-49d1-bc06-eef67e3f7050" class="image"><a href="images/nv5.gif"><img style="width:800px" src="images/nv5.gif"/></a></figure></div><div id="5966a729-8f2d-46d6-b1af-675371ae60cf" style="width:33.33333333333333%" class="column"><figure id="f7978100-630d-4de0-9fe7-96eba1e44968" class="image"><a href="images/nv6.gif"><img style="width:800px" src="images/nv6.gif"/></a></figure></div><div id="cab2e8d1-c2dd-4d89-aa8f-1e4b94e15938" style="width:33.33333333333333%" class="column"><figure id="68d49617-e8d2-43f8-8c8f-72a0016ed4a6" class="image"><a href="images/nv2.gif"><img style="width:800px" src="images/nv2.gif"/></a></figure></div></div><p id="d21e8589-5b04-48f2-8b23-d408377c12f1" class="">
</p><p id="28a21065-d4c9-407b-9b6c-f2554e98bbbd" class="">Before the full physical system was working, we had a midpoint animation with a basic explosion simulation, with no fluid forces:</p><div id="63408323-8ad5-4755-aa4b-463958f855a9" class="column-list"><div id="df501e99-59d3-4db5-b423-a49e447d2081" style="width:50%" class="column"><figure id="6ab693f6-58c8-4155-9e68-276d3e17e3d6" class="image"><a href="images/Untitled.gif"><img style="width:800px" src="images/Untitled.gif"/></a><figcaption>500k particle explosions!</figcaption></figure></div><div id="01c106b5-9d65-4d6b-a73d-5b73a59b050d" style="width:50%" class="column"><figure id="4d6cddd9-636d-4f29-a4e8-4b83b6faf89d" class="image"><a href="images/Untitled%201.gif"><img style="width:800px" src="images/Untitled%201.gif"/></a><figcaption>1 million particle explosions!</figcaption></figure></div></div><p id="055a4fb1-b243-4321-b910-bc6803d81701" class="">
</p><h3 id="e8c628ff-bb26-403e-8449-4850c43b1a3c" class=""><strong>References</strong></h3><p id="84fb890d-c032-4fdf-bbe1-a4e26ae1cefd" class=""><a href="https://developer.nvidia.com/blog/accelerated-ray-tracing-cuda/">https://developer.nvidia.com/blog/accelerated-ray-tracing-cuda/</a></p><p id="b1294cf4-a91e-4128-a11d-08bd0c7847e5" class=""><a href="http://graphics.berkeley.edu/papers/Feldman-ASP-2003-08/Feldman-ASP-2003-08.pdf">http://graphics.berkeley.edu/papers/Feldman-ASP-2003-08/Feldman-ASP-2003-08.pdf</a></p><p id="5d1a2f0a-397d-44b8-9dab-f63b5fccb461" class=""><a href="https://pages.cs.wisc.edu/~chaol/data/cs777/stam-stable_fluids.pdf">https://pages.cs.wisc.edu/~chaol/data/cs777/stam-stable_fluids.pdf</a></p><p id="4bfe2e39-7506-4418-9b01-c61042f09daa" class=""><a href="https://web.stanford.edu/class/cs237d/smoke.pdf">https://web.stanford.edu/class/cs237d/smoke.pdf</a></p><p id="6e0af031-cb83-4486-bfce-ad140d9b65b7" class=""><a href="http://www.vendian.org/mncharity/dir3/blackbody/">http://www.vendian.org/mncharity/dir3/blackbody/</a></p><p id="36d0e0d2-1751-443e-b93a-583bac4b7e11" class=""><a href="http://www.vendian.org/mncharity/dir3/blackbody/">https://tavianator.com/2022/ray_box_boundary.html</a></p><p id="aea12e3c-2e97-4f4b-904c-457939285eb9" class=""><a href="https://developer.nvidia.com/blog/accelerated-ray-tracing-cuda/">https://developer.nvidia.com/blog/accelerated-ray-tracing-cuda/</a></p><p id="9979bfec-88df-452c-89a7-3ed032339c3c" class="">
</p><h3 id="0175caef-19b8-4083-a4fe-bfa53d9c7ed4" class=""><strong>Contributions from each team member</strong></h3><p id="1ec354f7-6c72-44b0-98dd-b1620a93e095" class=""><strong>Anthony</strong>: Anthony had access to the GPU and handled all of the raytracing with CUDA-acceleration optimizations on the project 3 code (module 1). Additionally, he helped with the various deliverables, and created a simplified physics model for particle only physics simulations.</p><p id="e9b557af-b298-4e7a-925c-d11448ecb25a" class=""><strong>Shruteek</strong>: Shru handled a lot of the physics, doing the most physics research. He set up the classes for module 2 and handled the complicated fluid physics that is modeled after Navier Stokes, and also helped with project deliverables and videos.</p><p id="5bf44eb9-3af9-4e32-ae42-450ada3509c7" class=""><strong>Srisai</strong>: Srisai handled the kinematics of the physics (forces on the particles) and also the visualizer (module 3). He worked out how to take the physics particles and convert them to primitives appropriate for the renderer, translating particle properties into primitive properties for the graphics. He also helped with the proposal and final deliverables.</p><p id="535a91eb-aba0-4397-b019-84ddf7d72719" class=""><strong>Maddy: </strong>Maddy also handled the kinematics of the physics (forces on the particles) and the visualizer (module 3). She also worked out translating particle properties into primitive properties for the graphics (eg, temperature to color). She also worked a lot on the project deliverables.</p><p id="638054a9-cac7-4f7c-8f22-3d30b844c3b0" class="">
</p><p id="4178d8c1-0d04-4c91-8ee0-dcd01fcfdff6" class="">
</p></div></article></body></html>
